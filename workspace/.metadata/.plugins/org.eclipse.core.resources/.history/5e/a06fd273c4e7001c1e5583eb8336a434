package exam;

import java.sql.Connection; //연결객체
import java.sql.DriverManager;
import java.sql.ResultSet; //결과객체
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.PreparedStatement;
public class DBconnection {

	public static void main(String[] args) {
		   public static void main(String[] args) {
			      String driver = "oracle.jdbc.driver.OracleDriver";// 이대로 써야한다.
			      String url = "jdbc:oracle:thin:@localhost:1521:xe";// 주소가 된다.
			      String user = "ddit";
			      String password = "java";

			      Connection conn = null; // 연결객체
			      ResultSet rs = null; // 결과를 보관할 객체
			      Statement stmt = null; // sql명령 객체
			      PreparedStatement pstmt = null; // 동적 sql 명령객체
			      Scanner sc = new Scanner(System.in);
			      StringBuilder sql = new StringBuilder();

			      try {
			         Class.forName(driver);
			         conn = DriverManager.getConnection(url, user, password);

			         sql.append(" insert into lprod(lprod_id, lprod_gu, lprod_nm)");
			         sql.append(" values(seq_ㅖlprod_id.nextval, ?, ?) ");

			         System.out.print("분류코드(exP501) 입력 : ");
			         String gid = sc.next();
			         System.out.print("분류명(exP501) 입력 : ");
			         String gname = sc.next();

//			      명령객체생
			         pstmt = conn.prepareStatement(sql.toString());
			         pstmt.setString(1, gid);
			         pstmt.setString(2, gname);

			         int res = pstmt.executeUpdate();

			         if (res == 0) {
			            System.out.println("입력실패");
			         } else {
			            System.out.println("입력성공");
			         }
			      } catch (Exception e) {
			         e.printStackTrace();
			      } finally {
			         try {
			            if (rs != null)
			               rs.close();
			            if (pstmt != null)
			               pstmt.close();
			            if (conn != null)
			               conn.close();

			         } catch (Exception e) {
			            e.printStackTrace();
			         }
			      }
			   }
			}